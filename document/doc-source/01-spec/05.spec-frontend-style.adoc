ifndef::imagesdir[:imagesdir: ../images]
:data-uri:

=== 1.5.前端样式规范


Ant Design 5.0采用了CSSinJS的方式处理样式信息，所以Zero UI最新版前端结构使用模块化的SASS/SCSS和它配合实现样式的整体定义，摒弃掉前一个版本的LESS技术，主要解决现阶段的一个核心问题：*CSS全局污染问题*——这个问题目前充斥着整个框架底层，由于最初的LESS规划不足，且LESS又不可能做到局部封闭，所以最终选择CSS Module技术（基于SASS/SCSS，采用Dart Sass引擎替换原始的node-sass）重新规划产品样式。

==== 1.5.1.环境变量

样式相关的环境变量在前端中主要包含：

[source,properties]
----
Z_CSS_SKIN_MODULE=HM                # 使用的皮肤模块名
Z_CSS_SKIN_NAME=NormLight           # 深色风格 / 浅色风格
Z_CSS_SKIN_TOOL=true                # 支持动态样式调整（带有样式工具栏）
Z_CSS_COLOR=#36648b                 # 系统默认主色调
Z_CSS_FONT=14                       # 字号大小
Z_CSS_RADIUS=4                      # Ant中默认是6，修正成4，基础组件的圆角设置
----

最终 WebPack 中产生的环境变量数据代码片段如下：

[source,js]
----
    preOptions.additionalData = `
        $font_boot: ${process.env.Z_CSS_FONT}px;
        $color_boot: ${process.env.Z_CSS_COLOR};
        $radius_boot: ${process.env.CSS_RADIUS}px;
    `
    // 您的SCSS中可直接使用变量 
    // - $font_boot         全局字体大小
    // - $color_boot        全局默认色彩
    // - $radius_boot       全局默认边框圆角幅度（支持2,4,6,8）
----


[IMPORTANT]
====
不论是在生产环境还是开发环境，上述三个核心环境变量（ *Z_CSS_FONT、Z_CSS_RADIUS、Z_CSS_COLOR* ）是必须的，否则会导致SCSS注入失败引起启动问题。
====

WebPack中关于样式的路径和模块定义、使用流程如下：

[source,js]
----
    // config/modules.js 中定义
    skin: path.resolve(__dirname, "../src", "skin"),       // 皮肤管理器（最底层，由于zone存在控件定义）
    style: path.resolve(__dirname, "../src", "style"),     // 风格（SCSS导入用）
    
    // 使用代码
    import Sk from "skin";                                 // 风格API调用
    import __ from "./Cab.module.scss";                    // 当前模块样式文件模块化导入
----

==== 1.5.2.全局风格（style）

[NOTE]
====
全局风格文件位于style目录中，本章节描述全局风格文件的目录职责，不同职责目录入口文件都是 index.scss，相关说明在 style/index.scss 注释中。
====

[options="header"]
|====
|类型|路径|说明
|image:i-folder.png[,20] 目录|style/connect|第三方样式表连接专用目录。
|image:i-css.svg[,20] 文件|style/connect/mod.animate.css|动画效果专用CSS文件。
|image:i-folder.png[,20] / image:i-sass.svg[,20] 目录|style/function|通用样式函数。
|image:i-folder.png[,20] / image:i-sass.svg[,20] 目录|style/macrocosm|全局样式变量定义。
|image:i-sass.svg[,20] 文件|style/macrocosm/mod.color.scss|全局色彩变量。
|image:i-sass.svg[,20] 文件|style/macrocosm/mod.screen.scss|全局屏幕自适应变量。
|image:i-folder.png[,20] / image:i-sass.svg[,20] 目录|style/micrososm|局部可重用样式定义。
|image:i-folder.png[,20] / image:i-sass.svg[,20] 目录|style/module|模块样式定义。
|image:i-folder.png[,20] / image:i-sass.svg[,20] 目录|style/uca|组件样式定义。
|====

==== 1.5.3.组件风格

前端页面和容器位于 components/container 目录中，这种类型的样式名会使用样式包 *skin* 中的API直接提取（CSS Module）。组件类型的根样式则全部采用固定样式名，在代码中以 [source,js]`import "./Cab.norm.scss"` 方式导入生效。

[TIP]
====
标准组件位于目录 */economy* 中，所有扩展组件位于目录 */extension/ecosystem* 中。
====

[options="header"]
|====
|前缀|类型|说明
|ux_|全局组件|整合原始 web- 和 ux- 构造的新规划的全局样式。
|upg_|全局组件|原 /extension/components 文件夹下所有扩展页面样式信息。
|uca_|标准组件|标准自定义组件专用前缀名。
|uex_|扩展组件|*Ex* 前缀型组件（Extension）
|utx_|扩展组件|*Tx* 前缀型工作流专用组件（Task Of Workflow）。
|umy_|扩展组件|*My* 前缀型个人设置专用组件（My Setting）。
|uf_ |扩展组件|*F* 前缀型财务专用组件（Finance Module）。
|ug2_|扩展组件|*G2* 前缀型图表组件（G2）。
|uix_|扩展组件|*Ix* （不对外）前缀型内置组件（Internal Component）。
|uqx_|扩展组件|*Qx* 前缀型查询引擎组件（Query Engine Qr）。
|uhx_|扩展组件|*Hx* 前缀型高阶配置组件（High Order of Configuration）。
|====

==== 1.5.4.样式详情

[TIP]
====
函数部分参考源代码查看 *参数* 相关信息，此处就不一一列举，新版由于在变量中会调用，所以将原始的中划线 [source,shell]`-` 统一修改成下划线实现变量调用；*组件部分* 带有 [underline]`下划线` 的为引用全局样式的类名。
====

===== 1.5.4.1.全局函数

[options="header"]
|====
|名称|类型|说明
|attr_gradient_l|函数|水平渐变从左往右。
|attr_gradient_r|函数|水平渐变从右往左。
|attr_height_title|函数|标题高度设置（表单内可用）。
|attr_shadow_box|函数|阴影处理。
|unit_ant_btn_primary_100|函数|.ant-btn-primary的Ant样式修订，构造100%宽度的圆角大按钮。
|unit_empty|函数|修订<Empty/>组件样式。
|unit_date_picker|函数|针对时间日期选择器的背景色消除（去掉灰色）。
|uca_card_page|函数|Card组件专用，缩小边距的卡片样式设置。
|uca_dash_app|函数|MyMenu中调用，专用于App入口样式设置。
|uca_dialog|函数|Dialog组件专用（内置Modal），原版的web-dialog变种，主要设置弹窗风格和区域。
|uca_dialog_screen|函数|带有自适应布局的Dialog组件专用样式。
|uca_drawer|函数|Drawer组件专用，原版窗口变种，主要设置抽屉风格和区域。
|uca_form_error|函数|Zero UI特定的表单错误信息样式（浮游动画错误提示）。
|uca_form_login|函数|登录表单专用样式。
|uca_form_main|函数|主表单专用样式。
|uca_table_head|函数|列表头部专用函数，设置深色和浅色风格。
|====


===== 1.5.4.2.全局类

[options="header"]
|====
|名称|类型|说明
|ux_op_search|类名|全局搜索框专用样式。
|ux_op_ul|类名|全局横向链接菜单专用样式。
|ux_op_transfer|类名|针对Transfer穿梭框的专用样式（拉满整行）。
|ux_addon_after|类名|输入框附加按钮专用样式。
|ux_addon_disabled|类名|输入框禁用按钮专用样式。
|ux_block|类名|左右侧页签标题专用样式，对应旧版 ex-blocks。
|ux_hidden|类名|全局隐藏（display:none）专用样式，对应旧版 ux-hidden。
|ux_readonly|类名|全局只读专用样式，对应旧版 ux-readonly。
|ux_extra|类名|右上角附加操作区域专用样式，对应旧版 web-extra，多用于页签部分。
|ux_title|类名|对应旧版 ux-title ux-title-pure 的组合样式。
|ux_card|类名|对应旧版 web-card。
|ux_card|类名|对应旧版 web-card-form。
|ux_form|类名|对应旧版 web-form。
|ux_toolbar|类名|列表头部工具栏的主体样式信息。
|ux_tab|类名|对应旧版 ex-tabs / web-tab。
|ux_tab_block|类名|对应旧版 ex-tabs-tab-block。
|ux_tab_container|类名|对应旧版 web-tab-container。
|ux_tab_title|类名|对应旧版 web-tab-title。
|ux_date_picker|类名|对应原版的 ux-select-readonly。
|ux_select|类名|对应原版的 ux-select。
|ux_table|类名|列表中表格专用样式，对应旧版 web-table。
|ux_bag|类名|对应原版模块化专用处理。
|ux_view_my|类名|对应原版 ux-view-my，个人视图风格。
|====

===== 1.5.4.3.组件部分

[options="header"]
|====
|组件名称|专用样式|说明
|LoadingContent|uca_LoadingContent|页面加载专用。
|LoadingAlert|uca_LoadingAlert|不同提示框，Alert组件不同形态。
|BraftEditor|uca_BraftEditor / uca_BraftViewer|富文本编辑器专用。
|CheckTransfer|uca_CheckTransfer|穿梭框组件专用样式。
|FileLogo|uca_FileLogo|上传图表专用组件。
|FileBatch|uca_FileBatch|批量文件上传专用组件。|
|InputCaptcha|uca_InputCaptcha|验证码输入框。
|TreeSelector|uca_TreeSelector_Dialog|树型选择器中的弹窗专用样式。
|PageCard| [underline]`ux_card` |卡片样式。
|ExDialog|uex_Dialog|---
||uex_Dialog_Modal|容器 - 模态窗样式。
||uex_Dialog_Drawer|容器 - 抽屉样式。
|ExAnnounce|uex_ExAnnounce|公告呈现组件（首页调用）。
|ExForm| [underline]`ux_form` |表单样式。
|ExTab| [underline]`ux_tab` |页签样式。
|ExEditorView|uex_ExEditorView|视图管理组件。
|ExEditorExport|uex_ExEditorExport|导出组件。
|ExEditorImport|uex_ExEditorImport|导入组件。
|ExSearch|uex_ExSearch|搜索组件。
||uex_ExSearch_Drawer|高级搜索抽屉样式。
|ExView|uex_ExView|视图查看专用样式。
|MyMenu|umy_MyMenu|应用组件（首页调用）。
|MyTodo|umy_MyTodo|待办组件（首页调用）。
|QxCriteria|uqx_QxCriteria|查询条件管理器专用样式。
|QxProjection|[underline]`ux_op_transfer`|列过滤处理专用样式。
|TxPortal|utx_TxPortal|服务目录组件（首页调用）。
|====